# Contributing to AI Image Marker

Thank you for your interest in contributing to the AI Image Marker WordPress plugin! This document provides guidelines and instructions for contributors.

## ğŸš€ Getting Started

### Prerequisites

- Git
- PHP 7.0 or higher
- WordPress 5.0 or higher (for testing)
- `msgfmt` (part of gettext tools) for compiling translations
- `zip` command for building releases

### Setting Up Development Environment

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd wordpress-ai-image
   ```

2. **Install to WordPress (for testing)**
   ```bash
   # Option 1: Using Makefile
   make dev-install WP_PATH=/path/to/wordpress
   
   # Option 2: Manual
   cp -r ai-image-marker /path/to/wordpress/wp-content/plugins/
   ```

3. **Activate in WordPress**
   - Log into WordPress admin
   - Go to Plugins â†’ Installed Plugins
   - Activate "AI Image Marker"

## ğŸ“ Project Structure

```
wordpress-ai-image/
â”œâ”€â”€ .github/workflows/         # GitHub Actions workflows
â”‚   â”œâ”€â”€ release.yml           # Automatic releases on tags
â”‚   â””â”€â”€ build-test.yml        # Build testing on PRs
â”œâ”€â”€ ai-image-marker/           # Main plugin directory
â”‚   â”œâ”€â”€ ai-image-marker.php   # Core plugin file
â”‚   â”œâ”€â”€ admin.js              # Admin interface JavaScript
â”‚   â”œâ”€â”€ languages/            # Translation files
â”‚   â””â”€â”€ *.md                  # Documentation files
â”œâ”€â”€ release/                   # Build output directory
â”œâ”€â”€ build.sh                   # Build script
â”œâ”€â”€ Makefile                   # Make commands
â””â”€â”€ .gitignore                # Git ignore rules
```

## ğŸ”¨ Development Workflow

### Making Changes

1. **Create a new branch**
   ```bash
   git checkout -b feature/your-feature-name
   # or
   git checkout -b fix/your-bug-fix
   ```

2. **Make your changes**
   - Edit files in the `ai-image-marker/` directory
   - Follow WordPress coding standards
   - Add comments to complex code
   - Update documentation if needed

3. **Test your changes**
   - Test in WordPress (both admin and frontend)
   - Test with Classic Editor and Block Editor
   - Test in different languages
   - Check browser console for errors

4. **Commit your changes**
   ```bash
   git add .
   git commit -m "Brief description of changes"
   ```

5. **Push and create Pull Request**
   ```bash
   git push origin feature/your-feature-name
   # Then create PR on GitHub
   ```

### Building the Plugin

```bash
# Using the build script
./build.sh

# Using Make
make build

# Verify the build
make verify
```

## ğŸ¤– GitHub Actions

### Automated Workflows

We use GitHub Actions for automation:

1. **Build Test** - Runs on every PR and push to main/develop
   - Compiles translations
   - Runs build script
   - Verifies ZIP contents
   - Uploads build artifact

2. **Release** - Runs when you push a tag
   - Builds plugin ZIP
   - Creates GitHub release
   - Attaches ZIP to release
   - Generates release notes

### Creating a Release

1. **Update version** in `ai-image-marker/ai-image-marker.php`:
   ```php
   * Version: 1.1.0
   ```

2. **Update CHANGELOG** in `ai-image-marker/CHANGELOG.md`:
   ```markdown
   ## [1.1.0] - 2025-01-21
   
   ### Plugin - Added
   - New feature description
   
   ### Plugin - Fixed
   - Bug fix description
   ```

3. **Commit changes**:
   ```bash
   git add .
   git commit -m "Prepare v1.1.0 release"
   git push
   ```

4. **Create and push tag**:
   ```bash
   git tag v1.1.0
   git push origin v1.1.0
   ```

5. **GitHub Actions automatically**:
   - Builds the plugin
   - Creates release with ZIP attached
   - No manual build needed!

See `.github/workflows/README.md` for more details.

## ğŸŒ Adding Translations

### Adding a New Language

1. **Copy the template file**
   ```bash
   cp ai-image-marker/languages/ai-image-marker.pot \
      ai-image-marker/languages/ai-image-marker-{locale}.po
   ```
   Replace `{locale}` with the language code (e.g., `sv_SE` for Swedish)

2. **Translate the strings**
   - Use Poedit or another PO editor
   - Translate all msgid strings to msgstr
   - Keep formatting placeholders intact (e.g., `%s`, `%d`)

3. **Compile the translation**
   ```bash
   msgfmt ai-image-marker/languages/ai-image-marker-{locale}.po \
          -o ai-image-marker/languages/ai-image-marker-{locale}.mo
   
   # Or use Make
   make translations
   ```

4. **Test the translation**
   - Change WordPress language to your new language
   - Verify all strings display correctly
   - Check for formatting issues

### Updating Existing Translations

1. Edit the `.po` file for your language
2. Recompile with `msgfmt` or `make translations`
3. Test in WordPress

**Note**: `.mo` files are automatically generated by GitHub Actions during release.

## ğŸ“ Code Guidelines

### PHP Code Style

Follow [WordPress PHP Coding Standards](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/):

```php
<?php
// Good
function my_function( $param1, $param2 ) {
    if ( $param1 === $param2 ) {
        return true;
    }
    return false;
}

// Use WordPress functions
$value = esc_html( $user_input );
$url = esc_url( $link );
```

### JavaScript Code Style

Follow [WordPress JavaScript Coding Standards](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/javascript/):

```javascript
// Good
jQuery(document).ready(function($) {
    $('.my-class').on('click', function() {
        // Code here
    });
});
```

### Documentation

- Add PHPDoc comments to functions
- Explain complex logic with inline comments
- Update README.md for new features
- Add examples to EXAMPLES.md

## ğŸ§ª Testing Checklist

Before submitting your contribution, test:

- [ ] Plugin activates without errors
- [ ] Media library checkbox appears
- [ ] Marking images works (both grid and list view)
- [ ] Quick Edit functionality works
- [ ] Frontend notices display correctly
- [ ] Block Editor images show notices
- [ ] Classic Editor images show notices
- [ ] Translations work (test with Norwegian)
- [ ] No JavaScript console errors
- [ ] No PHP errors or warnings
- [ ] Compatible with Classic Editor
- [ ] Compatible with Block Editor (Gutenberg)
- [ ] Works with default WordPress theme
- [ ] ZIP build completes successfully

## ğŸ“¤ Submitting Changes

### Pull Request Process

1. **Ensure CI passes**
   - GitHub Actions will automatically test your build
   - Fix any issues before requesting review

2. **PR Description Should Include:**
   - What changes were made
   - Why the changes are needed
   - How to test the changes
   - Screenshots (for UI changes)
   - Related issue numbers

3. **PR Title Format:**
   - `Feature: Add something new`
   - `Fix: Resolve bug with X`
   - `Docs: Update documentation`
   - `Translation: Add Swedish language`
   - `Refactor: Improve code structure`

### Code Review Process

1. Maintainer reviews your PR
2. Automated tests run via GitHub Actions
3. Address any feedback
4. Once approved, maintainer will merge

## ğŸ› Reporting Issues

### Bug Reports

Include:
- WordPress version
- PHP version
- Theme name
- Active plugins list
- Steps to reproduce
- Expected behavior
- Actual behavior
- Screenshots (if applicable)
- Browser console errors (if applicable)

### Feature Requests

Include:
- Clear description of the feature
- Use case/problem it solves
- Proposed implementation (if you have ideas)
- Alternatives you've considered

## ğŸ”– Version Guidelines

We follow [Semantic Versioning](https://semver.org/):

- **MAJOR** (1.0.0): Incompatible API changes
- **MINOR** (0.1.0): New features, backward compatible
- **PATCH** (0.0.1): Bug fixes, backward compatible

## ğŸ“‹ Commit Message Guidelines

Use clear, descriptive commit messages:

```
Good commit messages:
- "Add REST API support for AI image status"
- "Fix Quick Edit not saving on some themes"
- "Update Norwegian translation"
- "Improve performance of media library queries"

Poor commit messages:
- "Fixed stuff"
- "Update"
- "Changes"
```

## ğŸ¯ Areas for Contribution

We welcome contributions in these areas:

### High Priority
- Additional language translations
- Bug fixes
- Performance improvements
- Accessibility improvements
- Security enhancements

### Medium Priority
- New features (discuss first in an issue)
- Code refactoring
- Documentation improvements
- Unit tests

### Ideas for Features
- Bulk actions in media library
- Settings page for customization
- Block editor sidebar integration
- WooCommerce enhancements
- Analytics/statistics
- Export/import functionality

## ğŸ“œ Code of Conduct

### Our Standards

- Be respectful and inclusive
- Welcome newcomers
- Accept constructive criticism
- Focus on what's best for the project
- Show empathy towards others

### Unacceptable Behavior

- Harassment or discrimination
- Trolling or insulting comments
- Publishing others' private information
- Other unprofessional conduct

## ğŸ“ Getting Help

Need help with development?

1. Check existing documentation
2. Search closed issues
3. Ask in a new issue (use "Question" label)
4. Reference specific code or line numbers

## ğŸ™ Recognition

Contributors will be:
- Listed in CHANGELOG.md
- Credited in release notes
- Appreciated in the community!

## ğŸ“„ License

By contributing, you agree that your contributions will be licensed under the GPL v2 or later license, matching the project license.

## âœ… Final Checklist

Before submitting:

- [ ] Code follows WordPress coding standards
- [ ] All tests pass
- [ ] Documentation updated
- [ ] Translations compiled (if applicable)
- [ ] Build script runs successfully
- [ ] Commit messages are clear
- [ ] Branch is up to date with main
- [ ] PR description is complete
- [ ] GitHub Actions build passes

## ğŸš€ Quick Command Reference

```bash
# Development
make build                              # Build plugin
make dev-install WP_PATH=/path/to/wp   # Install locally
make translations                       # Compile translations
make verify                             # Check ZIP contents
make clean                              # Clean artifacts

# Git workflow
git checkout -b feature/name            # New feature branch
git commit -m "message"                 # Commit changes
git push origin feature/name            # Push branch

# Release (maintainers only)
git tag v1.0.1                          # Create tag
git push origin v1.0.1                  # Push tag (triggers auto-release)
```

---

**Thank you for contributing to AI Image Marker!** ğŸ‰

For more information:
- Technical details: `PROJECT_OVERVIEW.md`
- File structure: `FILE_STRUCTURE.md`
- Quick commands: `QUICK_REFERENCE.md`
- GitHub Actions: `.github/workflows/README.md`
